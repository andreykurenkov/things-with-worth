public class TextSearch {
	public static int comparision; // Increment this every time a comparision is
									// made

	public static int[] last(String p) {
		int[] lastArr = new int[256];
		boolean[] found = new boolean[256];
		p = p.toLowerCase();
		for (int i = p.length() - 1; i >= 0; i--) {
			char c = p.charAt(i);
			if (!found[c]) {
				lastArr[c] = p.length() - i - 1;
				found[c] = true;
			}
		}
		for (int i = 0; i < lastArr.length; i++)
			if (!found[i])
				lastArr[i] = p.length();
		return lastArr;
	}

	public static int[] failure(String p) {
		// TODO
		return null;
	}

	public static int runBruteForce(String t, String p) {
		int matchAt = -1;
		for (int i = 0; i < t.length() - p.length(); i++) {
			boolean match = true;
			for (int j = 0; j < p.length(); j++) {
				comparision++;
				if (p.charAt(i) != t.charAt(j)) {
					match = false;
					break;
				}
			}
			if (match) {
				matchAt = i;
				break;
			}
		}
		return matchAt;
	}

	public static int runBoyerMoore(String t, String p) {
		int[] last = last(p);
		int matchAt = -1;
		int i = p.length() - 1;
		boolean match = false;
		while (i < t.length() && !match) {
			match = true;
			if (p.charAt(p.length() - 1) == t.charAt(i)) {
				for (int j = 1; j < p.length(); j++) {
					comparision++;
					if (p.charAt(p.length() - j) != t.charAt(i - j)) {
						match = false;
						break;
					}
				}

				if (match) {
					matchAt = i - p.length() + 1;
				} else {
					i++;
				}
			} else {
				if (p.contains("" + t.charAt(i)))
					i += last[t.charAt(i) - 'a'];
				else
					i += p.length();
			}
		}
		return matchAt;
	}

	public static int runKMP(String t, String p) {
		// TODO
		return 0;
	}

	// DO NOT edit code below this line

	public static void resetComp() {
		comparision = 0;
	}

	public static int getComp() {
		return comparision;
	}

}
